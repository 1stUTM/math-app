<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #ffffff;
            color: #000000;
            padding: 10px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            padding: 20px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        .categories {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            margin-bottom: 20px;
            padding: 5px 0;
        }
        .category-btn {
            padding: 10px 20px;
            border: none;
            background: #3390ec;
            color: white;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            font-size: 14px;
        }
        .category-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .formulas-section {
            display: none;
            flex-direction: column;
            gap: 15px;
        }
        .formulas-section.active {
            display: flex;
        }
        .formula-card {
            background: #f5f5f5;
            border-radius: 15px;
            padding: 20px;
        }
        .formula-card h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }
        .formula-text {
            font-family: 'Courier New', monospace;
            background: rgba(102, 126, 234, 0.1);
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            color: #667eea;
        }
        .inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        input {
            padding: 12px;
            border: 2px solid #dddddd;
            border-radius: 10px;
            font-size: 14px;
        }
        .calc-btn {
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            display: none;
        }
        .result:not(:empty) {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìê –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—É–ª—ã</h1>
        </header>

        <div class="categories">
            <button class="category-btn active" onclick="showCategory('geometry')">–ì–µ–æ–º–µ—Ç—Ä–∏—è</button>
            <button class="category-btn" onclick="showCategory('algebra')">–ê–ª–≥–µ–±—Ä–∞</button>
            <button class="category-btn" onclick="showCategory('trigonometry')">–¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è</button>
            <button class="category-btn" onclick="showCategory('calculator')">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</button>
        </div>

        <!-- –ì–µ–æ–º–µ—Ç—Ä–∏—è -->
        <div class="formulas-section active" id="geometry">
            <div class="formula-card">
                <h3>üî∫ –ü–ª–æ—â–∞–¥—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞</h3>
                <p class="formula-text">S = (a √ó h) / 2</p>
                <div class="inputs">
                    <input type="number" placeholder="–û—Å–Ω–æ–≤–∞–Ω–∏–µ (a)" id="tri-a">
                    <input type="number" placeholder="–í—ã—Å–æ—Ç–∞ (h)" id="tri-h">
                    <button class="calc-btn" onclick="calcTriangle()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="tri-result"></div>
            </div>

            <div class="formula-card">
                <h3>‚≠ï –ü–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞</h3>
                <p class="formula-text">S = œÄ √ó r¬≤</p>
                <div class="inputs">
                    <input type="number" placeholder="–†–∞–¥–∏—É—Å (r)" id="circle-r">
                    <button class="calc-btn" onclick="calcCircle()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="circle-result"></div>
            </div>

            <div class="formula-card">
                <h3>üìê –¢–µ–æ—Ä–µ–º–∞ –ü–∏—Ñ–∞–≥–æ—Ä–∞</h3>
                <p class="formula-text">c = ‚àö(a¬≤ + b¬≤)</p>
                <div class="inputs">
                    <input type="number" placeholder="–ö–∞—Ç–µ—Ç a" id="pyth-a">
                    <input type="number" placeholder="–ö–∞—Ç–µ—Ç b" id="pyth-b">
                    <button class="calc-btn" onclick="calcPythagoras()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="pyth-result"></div>
            </div>
        </div>

        <!-- –ê–ª–≥–µ–±—Ä–∞ -->
        <div class="formulas-section" id="algebra">
            <div class="formula-card">
                <h3>üìä –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ</h3>
                <p class="formula-text">ax¬≤ + bx + c = 0</p>
                <div class="inputs">
                    <input type="number" placeholder="a" id="quad-a">
                    <input type="number" placeholder="b" id="quad-b">
                    <input type="number" placeholder="c" id="quad-c">
                    <button class="calc-btn" onclick="calcQuadratic()">–†–µ—à–∏—Ç—å</button>
                </div>
                <div class="result" id="quad-result"></div>
            </div>

            <div class="formula-card">
                <h3>üìà –°—Ç–µ–ø–µ–Ω—å —á–∏—Å–ª–∞</h3>
                <p class="formula-text">a‚Åø</p>
                <div class="inputs">
                    <input type="number" placeholder="a" id="pow-a">
                    <input type="number" placeholder="n" id="pow-n">
                    <button class="calc-btn" onclick="calcPower()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="pow-result"></div>
            </div>

            <div class="formula-card">
                <h3>üî¢ –§–∞–∫—Ç–æ—Ä–∏–∞–ª</h3>
                <p class="formula-text">n!</p>
                <div class="inputs">
                    <input type="number" placeholder="n" id="fact-n">
                    <button class="calc-btn" onclick="calcFactorial()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="fact-result"></div>
            </div>
        </div>

        <!-- –¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è -->
        <div class="formulas-section" id="trigonometry">
            <div class="formula-card">
                <h3>üìê –°–∏–Ω—É—Å</h3>
                <p class="formula-text">sin(x)</p>
                <div class="inputs">
                    <input type="number" placeholder="–£–≥–æ–ª –≤ –≥—Ä–∞–¥—É—Å–∞—Ö" id="sin-x">
                    <button class="calc-btn" onclick="calcSin()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="sin-result"></div>
            </div>

            <div class="formula-card">
                <h3>üìê –ö–æ—Å–∏–Ω—É—Å</h3>
                <p class="formula-text">cos(x)</p>
                <div class="inputs">
                    <input type="number" placeholder="–£–≥–æ–ª –≤ –≥—Ä–∞–¥—É—Å–∞—Ö" id="cos-x">
                    <button class="calc-btn" onclick="calcCos()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="cos-result"></div>
            </div>

            <div class="formula-card">
                <h3>üìê –¢–∞–Ω–≥–µ–Ω—Å</h3>
                <p class="formula-text">tan(x)</p>
                <div class="inputs">
                    <input type="number" placeholder="–£–≥–æ–ª –≤ –≥—Ä–∞–¥—É—Å–∞—Ö" id="tan-x">
                    <button class="calc-btn" onclick="calcTan()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="tan-result"></div>
            </div>
        </div>

        <!-- –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä -->
        <div class="formulas-section" id="calculator">
            <div class="formula-card">
                <h3>üßÆ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h3>
                <p class="formula-text">–í–≤–µ–¥–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ</p>
                <div class="inputs">
                    <input type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2+2*2" id="calc-expr">
                    <button class="calc-btn" onclick="calcExpression()">–í—ã—á–∏—Å–ª–∏—Ç—å</button>
                </div>
                <div class="result" id="calc-result"></div>
            </div>
        </div>
    </div>

    <script>
        // Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
        function showCategory(cat) {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.formulas-section').forEach(s => s.classList.remove('active'));
            document.getElementById(cat).classList.add('active');
        }

        // –ì–µ–æ–º–µ—Ç—Ä–∏—è
        function calcTriangle() {
            const a = parseFloat(document.getElementById('tri-a').value);
            const h = parseFloat(document.getElementById('tri-h').value);
            if (isNaN(a) || isNaN(h)) {
                document.getElementById('tri-result').textContent = '‚ùå –í–≤–µ–¥–∏ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è';
                return;
            }
            const result = (a * h) / 2;
            document.getElementById('tri-result').textContent = `‚úÖ –ü–ª–æ—â–∞–¥—å: ${result.toFixed(2)}`;
        }

        function calcCircle() {
            const r = parseFloat(document.getElementById('circle-r').value);
            if (isNaN(r)) {
                document.getElementById('circle-result').textContent = '‚ùå –í–≤–µ–¥–∏ —Ä–∞–¥–∏—É—Å';
                return;
            }
            const result = Math.PI * r * r;
            document.getElementById('circle-result').textContent = `‚úÖ –ü–ª–æ—â–∞–¥—å: ${result.toFixed(2)}`;
        }

        function calcPythagoras() {
            const a = parseFloat(document.getElementById('pyth-a').value);
            const b = parseFloat(document.getElementById('pyth-b').value);
            if (isNaN(a) || isNaN(b)) {
                document.getElementById('pyth-result').textContent = '‚ùå –í–≤–µ–¥–∏ –æ–±–∞ –∫–∞—Ç–µ—Ç–∞';
                return;
            }
            const result = Math.sqrt(a*a + b*b);
            document.getElementById('pyth-result').textContent = `‚úÖ –ì–∏–ø–æ—Ç–µ–Ω—É–∑–∞: ${result.toFixed(2)}`;
        }

        // –ê–ª–≥–µ–±—Ä–∞
        function calcQuadratic() {
            const a = parseFloat(document.getElementById('quad-a').value);
            const b = parseFloat(document.getElementById('quad-b').value);
            const c = parseFloat(document.getElementById('quad-c').value);
            if (isNaN(a) || isNaN(b) || isNaN(c)) {
                document.getElementById('quad-result').textContent = '‚ùå –í–≤–µ–¥–∏ –≤—Å–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã';
                return;
            }
            const d = b*b - 4*a*c;
            if (d < 0) {
                document.getElementById('quad-result').textContent = '‚ùå –ù–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ—Ä–Ω–µ–π';
                return;
            }
            const x1 = (-b + Math.sqrt(d)) / (2*a);
            const x2 = (-b - Math.sqrt(d)) / (2*a);
            document.getElementById('quad-result').textContent = `‚úÖ x‚ÇÅ = ${x1.toFixed(2)}, x‚ÇÇ = ${x2.toFixed(2)}`;
        }

        function calcPower() {
            const a = parseFloat(document.getElementById('pow-a').value);
            const n = parseFloat(document.getElementById('pow-n').value);
            if (isNaN(a) || isNaN(n)) {
                document.getElementById('pow-result').textContent = '‚ùå –í–≤–µ–¥–∏ –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è';
                return;
            }
            const result = Math.pow(a, n);
            document.getElementById('pow-result').textContent = `‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: ${result.toFixed(2)}`;
        }

        function calcFactorial() {
            const n = parseInt(document.getElementById('fact-n').value);
            if (isNaN(n) || n < 0) {
                document.getElementById('fact-result').textContent = '‚ùå –í–≤–µ–¥–∏ –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ';
                return;
            }
            if (n > 170) {
                document.getElementById('fact-result').textContent = '‚ùå –ß–∏—Å–ª–æ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ';
                return;
            }
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            document.getElementById('fact-result').textContent = `‚úÖ ${n}! = ${result.toExponential(2)}`;
        }

        // –¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è
        function calcSin() {
            const x = parseFloat(document.getElementById('sin-x').value);
            if (isNaN(x)) {
                document.getElementById('sin-result').textContent = '‚ùå –í–≤–µ–¥–∏ —É–≥–æ–ª';
                return;
            }
            const rad = x * Math.PI / 180;
            const result = Math.sin(rad);
            document.getElementById('sin-result').textContent = `‚úÖ sin(${x}¬∞) = ${result.toFixed(4)}`;
        }

        function calcCos() {
            const x = parseFloat(document.getElementById('cos-x').value);
            if (isNaN(x)) {
                document.getElementById('cos-result').textContent = '‚ùå –í–≤–µ–¥–∏ —É–≥–æ–ª';
                return;
            }
            const rad = x * Math.PI / 180;
            const result = Math.cos(rad);
            document.getElementById('cos-result').textContent = `‚úÖ cos(${x}¬∞) = ${result.toFixed(4)}`;
        }

        function calcTan() {
            const x = parseFloat(document.getElementById('tan-x').value);
            if (isNaN(x)) {
                document.getElementById('tan-result').textContent = '‚ùå –í–≤–µ–¥–∏ —É–≥–æ–ª';
                return;
            }
            const rad = x * Math.PI / 180;
            const result = Math.tan(rad);
            document.getElementById('tan-result').textContent = `‚úÖ tan(${x}¬∞) = ${result.toFixed(4)}`;
        }

        // –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
        function calcExpression() {
            const expr = document.getElementById('calc-expr').value;
            if (!expr) {
                document.getElementById('calc-result').textContent = '‚ùå –í–≤–µ–¥–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ';
                return;
            }
            try {
                const result = eval(expr);
                document.getElementById('calc-result').textContent = `‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: ${result}`;
            } catch (e) {
                document.getElementById('calc-result').textContent = '‚ùå –û—à–∏–±–∫–∞ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏';
            }
        }
    </script>
</body>
</html>
